---
id: StoragePersisterOptions
title: StoragePersisterOptions
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Interface: StoragePersisterOptions\<TState, TSelected\>

Defined in: storage-persister.ts:19

Configuration options for creating a browser-based state persister.

The persister can use either localStorage (persists across browser sessions) or
sessionStorage (cleared when browser tab/window closes) to store serialized state.

## Type Parameters

• **TState**

• **TSelected** *extends* `Partial`\<`TState`\> = `TState`

## Properties

### buster?

```ts
optional buster: string;
```

Defined in: storage-persister.ts:27

A version string used to invalidate cached state. When changed, any existing
stored state will be considered invalid and cleared.

***

### defaultState?

```ts
optional defaultState: TState;
```

Defined in: storage-persister.ts:31

The default state to use if no state is found in storage.

***

### deserializer()?

```ts
optional deserializer: (state) => PersistedStorage<TSelected>;
```

Defined in: storage-persister.ts:38

Optional function to customize how state is deserialized after loading from storage.
By default, JSON.parse is used.

Optionally, consider using SuperJSON for better deserialization of complex objects. See https://github.com/flightcontrolhq/superjson

#### Parameters

##### state

`string`

#### Returns

[`PersistedStorage`](../persistedstorage.md)\<`TSelected`\>

***

### key

```ts
key: string;
```

Defined in: storage-persister.ts:42

Unique identifier used as the storage key for persisting state.

***

### maxAge?

```ts
optional maxAge: number;
```

Defined in: storage-persister.ts:47

Maximum age in milliseconds before stored state is considered expired.
When exceeded, the state will be cleared and treated as if it doesn't exist.

***

### onLoadState()?

```ts
optional onLoadState: (state, storagePersister) => void;
```

Defined in: storage-persister.ts:51

Optional callback that runs after state is successfully loaded.

#### Parameters

##### state

`undefined` | `TSelected`

##### storagePersister

[`StoragePersister`](../../classes/storagepersister.md)\<`TState`, `TSelected`\>

#### Returns

`void`

***

### onLoadStateError()?

```ts
optional onLoadStateError: (error, storagePersister) => void;
```

Defined in: storage-persister.ts:58

Optional callback that runs after state is unable to be loaded.

#### Parameters

##### error

`Error`

##### storagePersister

[`StoragePersister`](../../classes/storagepersister.md)\<`TState`, `TSelected`\>

#### Returns

`void`

***

### onSaveState()?

```ts
optional onSaveState: (state, storagePersister) => void;
```

Defined in: storage-persister.ts:65

Optional callback that runs after state is successfully saved.

#### Parameters

##### state

`TSelected`

##### storagePersister

[`StoragePersister`](../../classes/storagepersister.md)\<`TState`, `TSelected`\>

#### Returns

`void`

***

### onSaveStateError()?

```ts
optional onSaveStateError: (error, storagePersister) => void;
```

Defined in: storage-persister.ts:73

Optional callback that runs after state is unable to be saved.
For example, if the storage is full (localStorage >= 5MB)

#### Parameters

##### error

`Error`

##### storagePersister

[`StoragePersister`](../../classes/storagepersister.md)\<`TState`, `TSelected`\>

#### Returns

`void`

***

### select()?

```ts
optional select: (state) => TSelected;
```

Defined in: storage-persister.ts:91

Optional function to filter which parts of the state are persisted and loaded.
When provided, only the filtered state will be saved to storage and returned when loading.
This is useful for excluding sensitive or temporary data from persistence.

Note: Don't use this to replace the serialization. Use the `serializer` option instead for that.

#### Parameters

##### state

`TState`

#### Returns

`TSelected`

***

### serializer()?

```ts
optional serializer: (state) => string;
```

Defined in: storage-persister.ts:83

Optional function to customize how state is serialized before saving to storage.
By default, JSON.stringify is used.

Optionally, consider using SuperJSON for better serialization of complex objects. See https://github.com/flightcontrolhq/superjson

#### Parameters

##### state

[`PersistedStorage`](../persistedstorage.md)\<`TSelected`\>

#### Returns

`string`

***

### storage?

```ts
optional storage: null | Storage;
```

Defined in: storage-persister.ts:98

The browser storage implementation to use for persisting state.
Typically window.localStorage or window.sessionStorage.

Defaults to window.localStorage.
